<div class="w-full bg-slate-900 h-16 sticky top-0 z-[999] px-4">
  <div class="max-w-7xl w-full h-full mx-auto flex items-center justify-between">
    <!-- Search -->
    <div class="relative search-container" data-controller="toggle-search" data-toggle-search-target="searchContainer">
      <div class="flex flex-col items-center cursor-pointer p-2" data-action="click->toggle-search#toggle">
        <%= lucide_icon("search", class: "search-icon text-gray-100") %>
        <span class="text-sm text-gray-100 mt-1 search-label"><%= t("menu.search") %></span>
      </div>
      <%= render_input name: "q", placeholder: t("menu.search"), class: "search-input" %>
    </div>

    <!-- Navigation Links -->
    <%= link_to root_path(locale: I18n.locale), class: "flex flex-col items-center text-gray-100 p-2 rounded-md hover:bg-slate-800 transition-colors #{'bg-slate-800 font-semibold' if current_page?(root_path(locale: I18n.locale))}" do %>
      <%= lucide_icon("home", class: "mb-1") %>
      <span class="text-sm"><%= t("menu.home") %></span>
    <% end %>

    <%= link_to network_path(locale: I18n.locale), class: "flex flex-col items-center text-gray-100 p-2 rounded-md hover:bg-slate-800 transition-colors #{'bg-slate-800 font-semibold' if current_page?(network_path(locale: I18n.locale))}" do %>
      <%= lucide_icon("users", class: "mb-1") %>
      <span class="text-sm"><%= t("menu.network") %></span>
    <% end %>

    <%= link_to jobs_path(locale: I18n.locale), class: "flex flex-col items-center text-gray-100 p-2 rounded-md hover:bg-slate-800 transition-colors #{'bg-slate-800 font-semibold' if current_page?(jobs_path(locale: I18n.locale))}" do %>
      <%= lucide_icon("briefcase-business", class: "mb-1") %>
      <span class="text-sm"><%= t("menu.jobs") %></span>
    <% end %>

    <%= link_to messages_path(locale: I18n.locale), class: "flex flex-col items-center text-gray-100 p-2 rounded-md hover:bg-slate-800 transition-colors #{'bg-slate-800 font-semibold' if current_page?(messages_path(locale: I18n.locale))}" do %>
      <%= lucide_icon("message-square", class: "mb-1") %>
      <span class="text-sm"><%= t("menu.messages") %></span>
    <% end %>

    <!-- Profile Dropdown -->
    <% if current_user %>
      <%= render_dropdown_menu do %>
        <% dropdown_menu_trigger do %>
          <%= render_button variant: :ghost, class: "flex-col h-auto p-2 text-gray-100 hover:bg-slate-800 hover:text-white" do %>
            <%= lucide_icon("user", class: "mb-1") %>
            <span class="text-sm flex items-center gap-1">
              <%= t("menu.profile") %>
              <%= lucide_icon("chevron-down", class: "w-3 h-3") %>
            </span>
          <% end %>
        <% end %>

        <% dropdown_menu_content do %>
          <div class="px-2 py-1.5 flex items-center">
            <%= lucide_icon("circle-user-round", class: "mr-2 text-2xl text-slate-700") %>
            <span class="font-semibold text-slate-900"><%= current_user.username %></span>
          </div>

          <%= render_separator class: "my-1" %>

          <%= dropdown_menu_label "Account" %>
          <%= dropdown_menu_item do %>
             <%= link_to t("menu.edit_account"), edit_user_registration_path, class: "w-full" %>
          <% end %>
          <%= dropdown_menu_item do %>
            <%= link_to "Help", "#", class: "w-full" %>
          <% end %>
          <%= dropdown_menu_item do %>
            <%= link_to t("menu.language"), settings_path, class: "w-full" %>
          <% end %>

          <%= render_separator class: "my-1" %>

          <%= dropdown_menu_label "Management" %>
          <%= dropdown_menu_item do %>
            <%= link_to "Posts", posts_path, class: "w-full" %>
          <% end %>

          <%= render_separator class: "my-1" %>

          <%= dropdown_menu_item do %>
            <%= button_to t("menu.sign_out"), destroy_user_session_path, method: :delete, class: "w-full text-left hover:text-red-700" %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>